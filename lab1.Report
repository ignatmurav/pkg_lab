**Отчет по лабораторной работе №1 "Исследование цветовых моделей"**
**Вариант 6**

**Цель работы**
Изучить цветовые модели: CMYK, RGB, HSL, а также переход от одной модели к другой, исследовать цветовой график МКО.

**Ход работы**
Разработано приложение, предоставляющее пользователю возможность интерактивного выбора и изменения цвета с одновременным отображением его параметров в трех цветовых моделях.

**Основные требования к приложению**
- В интерфейсе дать возможность пользователю задавать точные цвета (поля ввода), выбирать цвета из палитры (аналогично графическим редакторам), плавно изменять цвета (например, ползунки).
- При изменении любой компоненты цвета все остальные представления этого цвета в двух других цветовых моделях пересчитываются автоматически.
- При «некорректных цветах» выдавать некое ненавязчивое предупреждение, что происходит обрезание, округление и т.п.

**Техническая реализация**
- Среда разработки: Qt Creator
- Язык программирования: C++
- Компилятор: MinGW 64-bit

**Результаты реализации**
**Выполненные задачи:**
- **Система преобразований между моделями:**
  - Двустороннее преобразование между RGB и CMYK
  - Взаимное преобразование между RGB и HSL
  - Автоматическое обновление всех параметров цвета при изменении любого компонента
- **Многофункциональный интерфейс задания цвета:**
  - Плавная регулировка с помощью ползунков
  - Точный ввод числовых значений
  - Графический выбор через цветовую палитру
- **Элементы пользовательского интерфейса:**
  - Визуальный пикер цвета с областью насыщенности и яркости
  - Тонконастраиваемый слайдер оттенка
  - Поле ввода HEX-значения
  - Область предпросмотра текущего цвета
- **Обработка некорректных данных:**
  - Автоматическая коррекция значений в допустимых пределах
  - Информативное уведомление о произведенных корректировках

**Возникшие трудности:**
- Реализация преобразований между моделями:
  - Проблемы с точностью округления при изменении параметров (устранено)
  - Сложности с обработкой граничных условий в преобразованиях

**Процедура тестирования**
1. **Проверка корректности преобразований:**
   - Верификация эталонных цветовых соответствий между моделями
   - Анализ поведения на граничных значениях
   - Сравнение результатов с популярными онлайн-конвертерами
2. **Тестирование интерфейсных компонентов:**
   - Проверка согласованности ползунков и числовых полей
   - Валидация работы HEX-ввода

**Формулы преобразований**

**1. Преобразование RGB → CMYK**
Нормализация компонент RGB:
```
r = R / 255
g = G / 255
b = B / 255
```
Вычисление ключевых компонент:
```
K = 1 - max(r, g, b)
C = (1 - r - K) / (1 - K)  // при K ≠ 1, иначе 0
M = (1 - g - K) / (1 - K)  // при K ≠ 1, иначе 0
Y = (1 - b - K) / (1 - K)  // при K ≠ 1, иначе 0
```

**2. Преобразование CMYK → RGB**
Расчет цветовых компонент:
```
R = 255 × (1 - C) × (1 - K)
G = 255 × (1 - M) × (1 - K)
B = 255 × (1 - Y) × (1 - K)
```

**3. Преобразование RGB → HSL**
Нормализация и определение экстремумов:
```
r = R / 255
g = G / 255
b = B / 255
max = MAX(r, g, b)
min = MIN(r, g, b)
delta = max - min
```
Расчет светлоты и насыщенности:
```
L = (max + min) / 2
S = (delta == 0) ? 0 : delta / (1 - abs(2 * L - 1))
```
Определение цветового тона:
```
if (delta == 0) {
    H = 0
} else if (max == r) {
    H = 60 × fmod((g - b) / delta, 6.0)
} else if (max == g) {
    H = 60 × ((b - r) / delta + 2)
} else {
    H = 60 × ((r - g) / delta + 4)
}
if (H < 0) H += 360
```

**4. Преобразование HSL → RGB**
Вспомогательные вычисления:
```
C = (1 - abs(2 * L - 1)) × S
X = C × (1 - abs(fmod(H / 60, 2) - 1))
m = L - C / 2
```
Определение промежуточных значений:
```
if (0 ≤ H < 60)       (r1, g1, b1) = (C, X, 0)
else if (60 ≤ H < 120) (r1, g1, b1) = (X, C, 0)
else if (120 ≤ H < 180) (r1, g1, b1) = (0, C, X)
else if (180 ≤ H < 240) (r1, g1, b1) = (0, X, C)
else if (240 ≤ H < 300) (r1, g1, b1) = (X, 0, C)
else                   (r1, g1, b1) = (C, 0, X)
```
Финальное преобразование:
```
R = (r1 + m) × 255
G = (g1 + m) × 255
B = (b1 + m) × 255
```

**Итоги работы**
1. **Достижение целевых показателей** - создано функциональное приложение для анализа цветовых моделей с точными алгоритмами конвертации между RGB, CMYK и HSL.
2. **Соответствие интерфейса техническому заданию** - реализованы все требуемые методы задания цвета с автоматической синхронизацией параметров.
3. **Корректность математических вычислений** - разработанные алгоритмы преобразований демонстрируют высокую точность и надежность.
4. **Готовность к эксплуатации** - приложение обладает стабильной работой и удобным пользовательским интерфейсом.
5. **Основные технические сложности** были связаны с обеспечением точности преобразований и обработкой особых случаев в цветовых моделях.
